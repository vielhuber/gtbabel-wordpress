!function e(t,l,n){function a(r,s){if(!l[r]){if(!t[r]){var _="function"==typeof require&&require;if(!s&&_)return _(r,!0);if(g)return g(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var o=l[r]={exports:{}};t[r][0].call(o.exports,(function(e){return a(t[r][1][e]||e)}),o,o.exports,e,t,l,n)}return l[r].exports}for(var g="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;l.default=class{init(){this.initAltLng(),this.initPreventLngs()}initAltLng(){wp.hooks.addFilter("blocks.registerBlockType","custom/attrs",e=>(e.attributes={...e.attributes,gtbabel_alt_lng:{type:"string",default:""},gtbabel_hide_block_target:{type:"boolean",default:""}},e)),wp.hooks.addFilter("editor.BlockEdit","custom/attrinputs",wp.compose.createHigherOrderComponent(e=>t=>{let l=[];l.push({value:null,label:wp.i18n.__("Page language","gtbabel-plugin")});for(const[e,t]of Object.entries(wpgutenberg_data.languages_with_source_at_last))l.push({value:e,label:t});return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(e,t),wp.element.createElement(wp.blockEditor.InspectorControls,null,wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Languages","gtbabel-plugin")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Source language","gtbabel-plugin"),value:t.attributes.gtbabel_alt_lng,onChange:e=>t.setAttributes({gtbabel_alt_lng:e}),options:l}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Show only there","gtbabel-plugin"),checked:!0===t.attributes.gtbabel_hide_block_target,onChange:e=>t.setAttributes({gtbabel_hide_block_target:e})}))))},"withcustomattrinputs"))}initPreventLngs(){wp.plugins.registerPlugin("my-plugin-sidebar",{render:()=>wp.element.createElement(wp.editPost.PluginDocumentSettingPanel,{title:wp.i18n.__("Language","gtbabel-plugin"),name:"gtbabel-gutenberg-sidebar",icon:"admin-site-alt3"},wp.element.createElement(wp.compose.compose(wp.data.withDispatch(e=>({set_gtbabel_alt_lng:t=>{e("core/editor").editPost({meta:{gtbabel_alt_lng:t}})},set_gtbabel_prevent_lngs:t=>{e("core/editor").editPost({meta:{gtbabel_prevent_lngs:t}})},set_slug:t=>{e("core/editor").editPost({slug:t})}})),wp.data.withSelect(e=>{var t,l,n;return{get_gtbabel_alt_lng:null!==(t=e("core/editor").getEditedPostAttribute("meta").gtbabel_alt_lng)&&void 0!==t?t:"",get_gtbabel_prevent_lngs:null!==(l=e("core/editor").getEditedPostAttribute("meta").gtbabel_prevent_lngs)&&void 0!==l?l:"",get_status:null!==(n=e("core/editor").getEditedPostAttribute("status"))&&void 0!==n?n:"",get_slug:e("core/editor").getEditedPostSlug()}}))(e=>{1!=wpgutenberg_data.prevent_publish_wp_new_posts||""!=e.get_gtbabel_prevent_lngs||""!=e.get_slug&&isNaN(e.get_slug)||e.set_gtbabel_prevent_lngs(","+wpgutenberg_data.languages_without_source.map(e=>e+"_guest").join(",")+",");let t=[];if(""==e.get_slug||!isNaN(e.get_slug))return wp.element.createElement("div",null,t);let l=[];for(const[e,t]of Object.entries(wpgutenberg_data.languages))l.push({value:e===wpgutenberg_data.source_lng?"":e,label:t});t.push(wp.element.createElement(wp.components.BaseControl,{help:"gtbabel_alt_lng: "+e.get_gtbabel_alt_lng+", gtbabel_prevent_lngs: "+e.get_gtbabel_prevent_lngs})),t.push(wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Source language","gtbabel-plugin"),value:e.get_gtbabel_alt_lng,options:l,disabled:""!=e.get_gtbabel_alt_lng||"publish"===e.get_status,onChange:t=>{e.set_gtbabel_alt_lng(t);let l=e.get_gtbabel_prevent_lngs;(l.includes(","+wpgutenberg_data.source_lng+",")||l.includes(","+wpgutenberg_data.source_lng+"_guest,"))&&(l=l.replace(","+wpgutenberg_data.source_lng+",",",SWAP,"),l=l.replace(","+wpgutenberg_data.source_lng+"_guest,",",SWAP_guest,")),(l.includes(","+t+",")||l.includes(","+t+"_guest,"))&&(l=l.replace(","+t+",",","+wpgutenberg_data.source_lng+","),l=l.replace(","+t+"_guest,",","+wpgutenberg_data.source_lng+"_guest,")),(l.includes(",SWAP,")||l.includes(",SWAP_guest,"))&&(l=l.replace(",SWAP,",","+t+","),l=l.replace(",SWAP_guest,",","+t+"_guest,")),e.set_gtbabel_prevent_lngs(l),""!=t?wp.apiFetch({path:"/v1/translate/slug",method:"POST",body:JSON.stringify({slug:e.get_slug,lng_source:t,lng_target:wpgutenberg_data.source_lng}),cache:"no-cache",headers:{"content-type":"application/json"}}).then(t=>{e.set_slug(t.data.slug),wp.data.dispatch("core/editor").savePost()}):wp.data.dispatch("core/editor").savePost()}})),t.push(wp.element.createElement(wp.components.BaseControl,{label:wp.i18n.__("Availability","gtbabel-plugin"),help:wp.i18n.__("Here you can control whether this page should be translated in all or only in a few languages.","gtbabel-plugin")}));for(const[l,n]of Object.entries(wpgutenberg_data.languages).sort((t,l)=>""==e.get_gtbabel_alt_lng&&wpgutenberg_data.source_lng==t[0]||e.get_gtbabel_alt_lng==t[0]?1:""==e.get_gtbabel_alt_lng&&wpgutenberg_data.source_lng==l[0]||e.get_gtbabel_alt_lng==l[0]?-1:0))t.push(wp.element.createElement(wp.components.BaseControl,null,wp.element.createElement(wp.components.Flex,null,wp.element.createElement(wp.components.FlexBlock,null,wp.element.createElement(wp.components.ButtonGroup,null,wp.element.createElement(wp.components.Button,{icon:"no-alt",isPrimary:e.get_gtbabel_prevent_lngs.includes(","+l+","),onClick:()=>{let t=e.get_gtbabel_prevent_lngs;t.includes(","+l+"_guest,")&&(t=t.replace(l+"_guest,","")),t.includes(","+l+",")||(t+=(t.includes(",")?"":",")+l+","),e.set_gtbabel_prevent_lngs(t)}}),wp.element.createElement(wp.components.Button,{icon:"hidden",isPrimary:e.get_gtbabel_prevent_lngs.includes(","+l+"_guest,"),onClick:()=>{let t=e.get_gtbabel_prevent_lngs;t.includes(","+l+",")&&(t=t.replace(l+",","")),t.includes(","+l+"_guest,")||(t+=(t.includes(",")?"":",")+l+"_guest,"),e.set_gtbabel_prevent_lngs(t)}}),wp.element.createElement(wp.components.Button,{icon:"yes",isPrimary:!e.get_gtbabel_prevent_lngs.includes(","+l+",")&&!e.get_gtbabel_prevent_lngs.includes(","+l+"_guest,"),onClick:()=>{let t=e.get_gtbabel_prevent_lngs;t.includes(","+l+",")&&(t=t.replace(l+",","")),t.includes(","+l+"_guest,")&&(t=t.replace(l+"_guest,","")),","==t&&(t=""),e.set_gtbabel_prevent_lngs(t)}}))),wp.element.createElement(wp.components.FlexBlock,null,wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:n}})))));let n=[];for(const[t,l]of Object.entries(wpgutenberg_data.languages_with_source_at_last))""==e.get_gtbabel_alt_lng&&wpgutenberg_data.source_lng==t||e.get_gtbabel_alt_lng==t||e.get_gtbabel_prevent_lngs.includes(","+t+",")||n.push('<li><a href="'+wpgutenberg_data.translation_url+"&lng="+t+'">'+l+"</a></li>");return n.length>0&&(t.push(wp.element.createElement(wp.components.BaseControl,{label:"Ãœbersetzungen"})),t.push(wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:"<ul>"+n.join("")+"</ul>"}}))),wp.element.createElement("div",null,t)})))})}}},{}],2:[function(e,t,l){"use strict";(new(e("@babel/runtime/helpers/interopRequireDefault")(e("./WpGutenberg")).default)).init()},{"./WpGutenberg":1,"@babel/runtime/helpers/interopRequireDefault":3}],3:[function(e,t,l){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}]},{},[2]);